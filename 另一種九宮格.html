<pre>
<code>
//
// UART0_RX : UART0 RX recieve and display Text
//
// Board       : Nu-LB-NUC140
// MCU         : NUC140VE3CN (LQFP100)
// UART0       : baudrate=115200, databit=8, stopbit=1, paritybit=0, flowcontrol=None

#include <stdio.h>
#include <math.h>
#include <string.h>
#include "NUC100Series.h"
#include "MCU_init.h"
#include "SYS_init.h"
#include "LCD.h"
#include "Scankey.h"

void Init_UART(void)
{ 
  UART_Open(UART0, 9600);                     // set UART0 baud rate
}


void Show(uint16_t x)
{
		if(x==2||x==12||x==14||x==15){
		  PE0 = 1;
		}
		else{
		  PE0 = 0;
		}
		
		if(x==1||x==2||x==3||x==7||x==13){
		  PE2 = 1;
		}
		else{
		  PE2 = 0;
		}
		
		if(x==1||x==4||x==6||x==11||x==13){
		  PE3 = 1;
		}
		else{
		  PE3 = 0;
		}
		
		if(x==5||x==6||x==11||x==12||x==14||x==15){
		  PE4 = 1;
		}
		else{
		  PE4 = 0;
		}
		
		if(x==1||x==4||x==7||x==9||x==10||x==15){
		  PE5 = 1;
		}
		else{
		  PE5 = 0;
		}
		
		if(x==1||x==3||x==4||x==5||x==7||x==9){
		  PE6 = 1;
		}
		else{
		  PE6 = 0;
		}
		
		if(x==0||x==1||x==7||x==12){
		  PE7 = 1;
		}
		else{
		  PE7 = 0;
		}
}

void Display_7seg(int x)
{
	int a = 0, n = 0;
	int x1,x2,x3,x4;
	x1=x%10;
	x2=x/10%10;
	x3=x/10/10%10;
	x4=x/10/10/10;
	
	while(a<=200){
		PC4 = 1;
		PC5 = 0;
		PC6 = 0;
		PC7 = 0;
		Show(x1);
		CLK_SysTickDelay(500);
		PC4 = 0;
		PC5 = 1;
		PC6 = 0;
		PC7 = 0;
		Show(x2);
		CLK_SysTickDelay(500);
		PC4 = 0;
		PC5 = 0;
		PC6 = 1;
		PC7 = 0;
		Show(x3);
		CLK_SysTickDelay(500);
		PC4 = 0;
		PC5 = 0;
		PC6 = 0;
		PC7 = 1;
		Show(x4);
		CLK_SysTickDelay(500);
		a++;
	}
}


unsigned char test[] = {
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0xC0,0xE0,0xE0,0xF0,0xF0,0x78,0x78,0x78,0x78,0x3C,0x3C,0x3C,0x38,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xE0,0xF8,0xFC,0x7E,0x3F,0x0F,0x07,0x03,0x83,0xC1,0xE0,0xF0,0xF0,0xF8,0x78,0x3C,0x3C,0x3C,0x1E,0x1E,0x1E,0x1E,0x1E,0x1E,0x1E,0x1E,0x3C,0x3C,0x7C,0x78,0xF8,0xF0,0xE0,0xC0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xFE,0xFF,0xFF,0x3F,0x03,0x00,0x00,0xE0,0xFC,0xFF,0xFF,0x1F,0x07,0x01,0x00,0xC0,0xF0,0xF8,0xFC,0x3C,0x3E,0x1E,0x1E,0x1E,0x1E,0x1E,0x1E,0x3C,0x7C,0xF8,0xF0,0xE0,0x80,0x01,0x03,0x0F,0x3F,0xFF,0xFE,0xF8,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x3F,0xFF,0xFF,0xFC,0xC0,0x00,0x00,0x03,0x1F,0x7F,0xFF,0xFC,0xE0,0xC0,0x80,0x03,0x0F,0x1F,0x1F,0x1E,0x3C,0x3C,0x1E,0x1E,0x0E,0x04,0x00,0x80,0xC0,0xFF,0xFF,0xFF,0x7F,0x00,0x00,0x00,0x80,0xFF,0xFF,0xFF,0x7F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x07,0x0F,0x3F,0x7F,0xFC,0xF8,0xF0,0xE0,0xC1,0x83,0x87,0x07,0x0F,0x0F,0x1F,0x1E,0x1E,0x1E,0x1C,0x1C,0x1E,0x1E,0x1E,0x1F,0x0F,0x0F,0x07,0x83,0xC1,0xC0,0xE0,0xF0,0xF8,0x7E,0x3F,0x1F,0x0F,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x03,0x07,0x07,0x07,0x0F,0x0F,0x1F,0x1E,0x1E,0x1E,0x1E,0x1E,0x1E,0x1E,0x1E,0x1E,0x1E,0x0F,0x0F,0x0F,0x07,0x07,0x03,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};

unsigned char border[] = {
	0xFF,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0xFF,
	0xFF,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0xFF
};

unsigned char O[] = {
	0xFF,0x01,0xC1,0xF1,0x39,0x19,0x0D,0x0D,0x0D,0x0D,0x19,0x39,0xF1,0xC1,0x01,0xFF,
	0xFF,0x80,0x83,0x8F,0x9C,0x98,0xB0,0xB0,0xB0,0xB0,0x98,0x9C,0x8F,0x83,0x80,0xFF
};

unsigned char X[] = {
	0xFF,0x01,0x01,0x01,0x09,0x31,0x61,0x81,0x81,0x61,0x19,0x09,0x01,0x01,0x01,0xFF,
	0xFF,0x80,0x80,0xA0,0xB0,0x98,0x86,0x83,0x83,0x8C,0xB8,0xA0,0x80,0x80,0x80,0xFF
};

int sk(int i, int tem){
	while(i == 0){
		i = ScanKey();
	}
	tem = i;
	while(i != 0){
		i = ScanKey();
	}
	CLK_SysTickDelay(100000);
	return tem;
}

int ans[5][5];

int winner(int i) {
	for(i = 0;i < 3;i++){
		if((ans[0][i] == ans[1][i])&&(ans[1][i] == ans[2][i])&&(ans[1][i] != 0)){
			return ans[0][i];
		}
		if((ans[i][0] == ans[i][1])&&(ans[i][1] == ans[i][2])&&(ans[i][1] != 0)){
			return ans[i][0];
		}
	}
	if((ans[0][0] == ans[1][1])&&(ans[1][1] == ans[2][2])){
		return ans[0][0];
	}
	if((ans[0][2] == ans[1][1])&&(ans[1][1] == ans[2][0])){
		return ans[0][2];
	}
	return 0;
}

void drawO(int x, int y){
	draw_Bmp16x16(x,y,FG_COLOR,BG_COLOR,O);
}
void drawX(int x, int y){
	draw_Bmp16x16(x,y,FG_COLOR,BG_COLOR,X);
}

void BuzzS(void)
{
  PB11 = 0;
	CLK_SysTickDelay(30000);
	PB11 = 1;
	CLK_SysTickDelay(30000);
}

void BuzzL(void)
{
  PB11 = 0;
	CLK_SysTickDelay(300000);
	PB11 = 1;
}

void rgb(int i)
{
	if(i%3==0)
	{
		PA12 = 0; PA13 = 1; PA14 = 1;
	}
	else if(i%3==1)
	{
		PA12 = 1; PA13 = 0; PA14 = 1;
	}
	else
	{
		PA12 = 1; PA13 = 1; PA14 = 0;
	}
}

void run(){
	PC12 = 0;
	PC13 = 1;
	PC14 = 1;
	PC15 = 1;
	CLK_SysTickDelay(50000);
	PC12 = 1;
	PC13 = 0;
	PC14 = 1;
	PC15 = 1;
	CLK_SysTickDelay(50000);
	PC12 = 1;
	PC13 = 1;
	PC14 = 0;
	PC15 = 1;
	CLK_SysTickDelay(50000);
	PC12 = 1;
	PC13 = 1;
	PC14 = 1;
	PC15 = 0;
	CLK_SysTickDelay(50000);
	PC12 = 1;
	PC13 = 1;
	PC14 = 1;
	PC15 = 1;
}

int main(void)
{
	char TX_Buffer[2]="\0\0";
	char RX_Buffer[2]="\0\0";
	
	int i = 0;
	int j = 0;
	int x = 0;
	int y = 0;
	int f = 0;
	int round = 1;
	int win = 0;
	
	SYS_Init();	  
	init_LCD();
	clear_LCD();
	Init_UART();
	GPIO_SetMode(PB,BIT1,GPIO_MODE_QUASI);
	GPIO_SetMode(PB,BIT2,GPIO_MODE_QUASI);
	GPIO_SetMode(PB,BIT3,GPIO_MODE_QUASI);
	GPIO_SetMode(PB,BIT4,GPIO_MODE_QUASI);
	GPIO_SetMode(PB,BIT5,GPIO_MODE_QUASI);
	GPIO_SetMode(PB,BIT6,GPIO_MODE_QUASI);
	GPIO_SetMode(PB,BIT7,GPIO_MODE_QUASI);
	GPIO_SetMode(PB,BIT8,GPIO_MODE_QUASI);
	GPIO_SetMode(PB,BIT9,GPIO_MODE_QUASI);
	
	PD14 = 0;	
	draw_Bmp16x16(0,0,FG_COLOR,BG_COLOR,border);
	draw_Bmp16x16(16,0,FG_COLOR,BG_COLOR,border);
	draw_Bmp16x16(32,0,FG_COLOR,BG_COLOR,border);
	draw_Bmp16x16(0,16,FG_COLOR,BG_COLOR,border);
	draw_Bmp16x16(16,16,FG_COLOR,BG_COLOR,border);
	draw_Bmp16x16(32,16,FG_COLOR,BG_COLOR,border);
	draw_Bmp16x16(0,32,FG_COLOR,BG_COLOR,border);
	draw_Bmp16x16(16,32,FG_COLOR,BG_COLOR,border);
	draw_Bmp16x16(32,32,FG_COLOR,BG_COLOR,border);

  for(i = 0;i < 3;i++){
		for(j = 0;j < 3;j++){
			ans[i][j] = 0;
		}
	}
	while(1){
		while(round <= 9)
		{
			i = 0;
			if(round % 2 == 0){
				UART_Read(UART0, RX_Buffer, 2);
				i = (char)RX_Buffer[0] - '0';
				//print_Line(3, RX_Buffer);
			}
			else{
				while(i == 0){
		  	  i = ScanKey();
				}
				sprintf(TX_Buffer, "%d\0", i);
				//print_Line(3, TX_Buffer);
			  UART_Write(UART0, TX_Buffer, 2);
			  CLK_SysTickDelay(1000);
			}
			//Display_7seg(i);
			if(i == 1||i == 4||i == 7){
				x = 0;
			}
			else if(i == 2||i == 5||i == 8){
				x = 16;
			}
			else{
				x = 32;
			}
			
			if(i == 1||i == 2||i == 3){
				y = 0;
			}
			else if(i == 4||i == 5||i == 6){
				y = 16;
			}
			else{
				y = 32;
			}
			if(round % 2 == 0){
				if(ans[x/16][y/16] == 0){
					ans[x/16][y/16] = 1;
					drawO(x,y);
					BuzzS();
					round++;
				}
				else{
						rgb(1);
						CLK_SysTickDelay(2000);
						rgb(2);
						CLK_SysTickDelay(2000);
						rgb(3);
						CLK_SysTickDelay(2000);
						PA12 = 1; PA13 = 1; PA14 = 1;
						run();
						run();
				}
			}
			else{
				if(ans[x/16][y/16] == 0){
					ans[x/16][y/16] = 2;
					drawX(x,y);
					BuzzS();
					round++;
				}
				else{
						rgb(1);
						CLK_SysTickDelay(2000);
						rgb(2);
						CLK_SysTickDelay(2000);
						rgb(3);
						CLK_SysTickDelay(2000);
						PA12 = 1; PA13 = 1; PA14 = 1;
						run();
						run();
				}
			}
			win = winner(0);
			if(win != 0){
				break;
			}
		}
		if(win == 1){
			print_Line(3, "O win");
			rgb(1);
		}
		else if(win == 2){
			print_Line(3, "X win");
			rgb(3);
		}
		else{
			print_Line(3, "even");
		  rgb(2);
		}
		BuzzL();
		BuzzL();
		
		i = sk(0,0);
		PA12 = 1; PA13 = 1; PA14 = 1;
		round = 1;
		for(i = 0;i < 3;i++){
			for(j = 0;j < 3;j++){
			  ans[i][j] = 0;
		  }
		}
		clear_LCD();
		draw_Bmp16x16(0,0,FG_COLOR,BG_COLOR,border);
		draw_Bmp16x16(16,0,FG_COLOR,BG_COLOR,border);
		draw_Bmp16x16(32,0,FG_COLOR,BG_COLOR,border);
		draw_Bmp16x16(0,16,FG_COLOR,BG_COLOR,border);
		draw_Bmp16x16(16,16,FG_COLOR,BG_COLOR,border);
		draw_Bmp16x16(32,16,FG_COLOR,BG_COLOR,border);
		draw_Bmp16x16(0,32,FG_COLOR,BG_COLOR,border);
		draw_Bmp16x16(16,32,FG_COLOR,BG_COLOR,border);
		draw_Bmp16x16(32,32,FG_COLOR,BG_COLOR,border);
	}
}
</code>
</pre>