<!DOCTYPE html>
<html lang="zh-tw">

<head>

    <title>
        機智的期末小精靈
    </title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" media="screen and (min-width: 768px)" href="index_PC.css">
    <link rel="shortcut icon" href="hanshan.ico">

    <script>

        window.onload = function () {

            var button1 = document.getElementById("button1");
            var hanshan1 = document.getElementById("hanshan1");
            var button2 = document.getElementById("button2");
            var hanshan2 = document.getElementById("hanshan2");
            var button3 = document.getElementById("button3");
            var hanshan3 = document.getElementById("hanshan3");
            var button4 = document.getElementById("button4");
            var hanshan4 = document.getElementById("hanshan4");
            var button5 = document.getElementById("button5");
            var hanshan5 = document.getElementById("hanshan5");
            var button6 = document.getElementById("button6");
            var hanshan6 = document.getElementById("hanshan6");

            button1.onclick = function () {

                button1.style.background = '#efe6ce'
                button1.style.color = '#73876a'
                hanshan1.style.display = 'block'

                button2.style.background = 'none'
                button2.style.color = '#efe6ce'
                hanshan2.style.display = 'none'
                button3.style.background = 'none'
                button3.style.color = '#efe6ce'
                hanshan3.style.display = 'none'
                button4.style.background = 'none'
                button4.style.color = '#efe6ce'
                hanshan4.style.display = 'none'
                button5.style.background = 'none'
                button5.style.color = '#efe6ce'
                hanshan5.style.display = 'none'
                button6.style.background = 'none'
                button6.style.color = '#efe6ce'
                hanshan6.style.display = 'none'

            }

            button2.onclick = function () {

                button2.style.background = '#efe6ce'
                button2.style.color = '#73876a'
                hanshan2.style.display = 'block'

                button1.style.background = 'none'
                button1.style.color = '#efe6ce'
                hanshan1.style.display = 'none'
                button3.style.background = 'none'
                button3.style.color = '#efe6ce'
                hanshan3.style.display = 'none'
                button4.style.background = 'none'
                button4.style.color = '#efe6ce'
                hanshan4.style.display = 'none'
                button5.style.background = 'none'
                button5.style.color = '#efe6ce'
                hanshan5.style.display = 'none'
                button6.style.background = 'none'
                button6.style.color = '#efe6ce'
                hanshan6.style.display = 'none'

            }

            button3.onclick = function () {

                button3.style.background = '#efe6ce'
                button3.style.color = '#73876a'
                hanshan3.style.display = 'block'

                button1.style.background = 'none'
                button1.style.color = '#efe6ce'
                hanshan1.style.display = 'none'
                button2.style.background = 'none'
                button2.style.color = '#efe6ce'
                hanshan2.style.display = 'none'
                button4.style.background = 'none'
                button4.style.color = '#efe6ce'
                hanshan4.style.display = 'none'
                button5.style.background = 'none'
                button5.style.color = '#efe6ce'
                hanshan5.style.display = 'none'
                button6.style.background = 'none'
                button6.style.color = '#efe6ce'
                hanshan6.style.display = 'none'

            }

            button4.onclick = function () {

                button4.style.background = '#efe6ce'
                button4.style.color = '#73876a'
                hanshan4.style.display = 'block'

                button1.style.background = 'none'
                button1.style.color = '#efe6ce'
                hanshan1.style.display = 'none'
                button2.style.background = 'none'
                button2.style.color = '#efe6ce'
                hanshan2.style.display = 'none'
                button3.style.background = 'none'
                button3.style.color = '#efe6ce'
                hanshan3.style.display = 'none'
                button5.style.background = 'none'
                button5.style.color = '#efe6ce'
                hanshan5.style.display = 'none'
                button6.style.background = 'none'
                button6.style.color = '#efe6ce'
                hanshan6.style.display = 'none'

            }

            button5.onclick = function () {

                button5.style.background = '#efe6ce'
                button5.style.color = '#73876a'
                hanshan5.style.display = 'block'

                button1.style.background = 'none'
                button1.style.color = '#efe6ce'
                hanshan1.style.display = 'none'
                button2.style.background = 'none'
                button2.style.color = '#efe6ce'
                hanshan2.style.display = 'none'
                button3.style.background = 'none'
                button3.style.color = '#efe6ce'
                hanshan3.style.display = 'none'
                button4.style.background = 'none'
                button4.style.color = '#efe6ce'
                hanshan4.style.display = 'none'
                button6.style.background = 'none'
                button6.style.color = '#efe6ce'
                hanshan6.style.display = 'none'

            }

            button6.onclick = function () {

                button6.style.background = '#efe6ce'
                button6.style.color = '#73876a'
                hanshan6.style.display = 'block'

                button1.style.background = 'none'
                button1.style.color = '#efe6ce'
                hanshan1.style.display = 'none'
                button2.style.background = 'none'
                button2.style.color = '#efe6ce'
                hanshan2.style.display = 'none'
                button3.style.background = 'none'
                button3.style.color = '#efe6ce'
                hanshan3.style.display = 'none'
                button4.style.background = 'none'
                button4.style.color = '#efe6ce'
                hanshan4.style.display = 'none'
                button5.style.background = 'none'
                button5.style.color = '#efe6ce'
                hanshan5.style.display = 'none'

            }

        }

    </script>

    <script>
        function copyCode(button, codeId) {
            var codeElement = document.getElementById(codeId);
            var range = document.createRange();
            range.selectNode(codeElement);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
            document.execCommand('copy');
            window.getSelection().removeAllRanges();
            button.textContent = '已複製';
            setTimeout(function () {
                button.textContent = '點擊複製';
            }, 1000);
        }
    </script>


</head>

<body>

    <div id="navbar">

        <div class="center">
            <p id="navbar_title">微處理機系統</p>
        </div>

        <button id="button1" class="navbarButton" style="background-color: #efe6ce; color: #73876a;">關於</button>
        <button id="button2" class="navbarButton">CHAPTER 06</button>
        <button id="button3" class="navbarButton">CHAPTER 07</button>
        <button id="button4" class="navbarButton">CHAPTER 10</button>
        <button id="button5" class="navbarButton">CHAPTER 11</button>
        <button id="button6" class="navbarButton">CHAPTER 12</button>

    </div>

    <div id="hanshan1">

        <div id="introduction">
            <div class="basic">
                <p class="introduction_B">前言｜</p>
                <p class="introduction">
                    早安午安晚安，歡迎使用期末小精靈
                    <br>
                </p>
                <p class="introduction_B">使用說明｜</p>
                <p class="introduction">
                    由於期末小精靈還是個寶寶，出現任何錯誤都是正常現象
                    <br>
                </p>
                <p class="introduction_B">快速跳轉｜</p>
                <p class="introduction">
                    <a class="link" href="#marquee">單向跑馬燈</a>
                    <br>
                    <br>
                    <a class="link" href="#sevenSegment1">一位數七段顯示器</a>
                    <br>
                    <a class="link" href="#sevenSegment4">四位數七段顯示器</a>
                    <br>
                    <br>
                    <a class="link" href="#buzzShort">蜂鳴器短鳴</a>
                    <br>
                    <a class="link" href="#buzzLong">蜂鳴器長鳴</a>
                </p>
                <p class="introduction_B" id="marquee">單向跑馬燈｜</p>
                <p class="introduction">
                    使用方式 run();
                </p>
                <button class="copyButton" onclick="copyCode(this, 'code1')">點擊複製</button>
                <pre>
<code id="code1">
void run()
{
    PC12 = 0;
    PC13 = 1;
    PC14 = 1;
    PC15 = 1;
    CLK_SysTickDelay(50000);
    PC12 = 1;
    PC13 = 0;
    PC14 = 1;
    PC15 = 1;
    CLK_SysTickDelay(50000);
    PC12 = 1;
    PC13 = 1;
    PC14 = 0;
    PC15 = 1;
    CLK_SysTickDelay(50000);
    PC12 = 1;
    PC13 = 1;
    PC14 = 1;
    PC15 = 0;
    CLK_SysTickDelay(50000);
    PC12 = 1;
    PC13 = 1;
    PC14 = 1;
    PC15 = 1;
}
</code>
                </pre>
                <p class="introduction_B" id="sevenSegment1">一位數七段顯示器｜</p>
                <p class="introduction">
                    使用方式 show(x);
                    <br>
                    補充說明 此段程式碼不包含延遲等待
                </p>
                <button class="copyButton" onclick="copyCode(this, 'code2')">點擊複製</button>
                <pre>
<code id="code2">
void show(int x)
{
    if(x==2||x==12||x==14||x==15){
        PE0 = 1;
    }
    else{
        PE0 = 0;
    }
    
    if(x==1||x==2||x==3||x==7||x==13){
        PE2 = 1;
    }
    else{
        PE2 = 0;
    }
    
    if(x==1||x==4||x==6||x==11||x==13){
        PE3 = 1;
    }
    else{
        PE3 = 0;
    }
    
    if(x==5||x==6||x==11||x==12||x==14||x==15){
        PE4 = 1;
    }
    else{
        PE4 = 0;
    }
    
    if(x==1||x==4||x==7||x==9||x==10||x==15){
        PE5 = 1;
    }
    else{
        PE5 = 0;
    }
    
    if(x==1||x==3||x==4||x==5||x==7||x==9){
        PE6 = 1;
    }
    else{
        PE6 = 0;
    }
    
    if(x==0||x==1||x==7||x==12){
        PE7 = 1;
    }
    else{
        PE7 = 0;
    }
}
</code>
                </pre>
                <p class="introduction_B" id="sevenSegment4">四位數七段顯示器｜</p>
                <p class="introduction">
                    使用方式 Display_7seg(x);
                    <br>
                    補充說明 此段程式碼會顯示前面的0，如果不想顯示，可以增加對x1、x2、x3、x4是否為零的判斷
                </p>
                <button class="copyButton" onclick="copyCode(this, 'code3')">點擊複製</button>
                <pre>
<code id="code3">
void show(int x)
{
    if(x==2||x==12||x==14||x==15){
        PE0 = 1;
    }
    else{
        PE0 = 0;
    }
    
    if(x==1||x==2||x==3||x==7||x==13){
        PE2 = 1;
    }
    else{
        PE2 = 0;
    }
    
    if(x==1||x==4||x==6||x==11||x==13){
        PE3 = 1;
    }
    else{
        PE3 = 0;
    }
    
    if(x==5||x==6||x==11||x==12||x==14||x==15){
        PE4 = 1;
    }
    else{
        PE4 = 0;
    }
    
    if(x==1||x==4||x==7||x==9||x==10||x==15){
        PE5 = 1;
    }
    else{
        PE5 = 0;
    }
    
    if(x==1||x==3||x==4||x==5||x==7||x==9){
        PE6 = 1;
    }
    else{
        PE6 = 0;
    }
    
    if(x==0||x==1||x==7||x==12){
        PE7 = 1;
    }
    else{
        PE7 = 0;
    }
}

void Display_7seg(int x)
{
    int a = 0, n = 0;
    int x1,x2,x3,x4;
    x1=x%10;
    x2=x/10%10;
    x3=x/10/10%10;
    x4=x/10/10/10;
    
    while(a<=200)
    {
        PC4 = 1;
        PC5 = 0;
        PC6 = 0;
        PC7 = 0;
        show(x1);
        CLK_SysTickDelay(500);
        PC4 = 0;
        PC5 = 1;
        PC6 = 0;
        PC7 = 0;
        show(x2);
        CLK_SysTickDelay(500);
        PC4 = 0;
        PC5 = 0;
        PC6 = 1;
        PC7 = 0;
        show(x3);
        CLK_SysTickDelay(500);
        PC4 = 0;
        PC5 = 0;
        PC6 = 0;
        PC7 = 1;
        how(x4);
        CLK_SysTickDelay(500);
        a++;
    }
}
</code>
                </pre>
                <p class="introduction_B" id="buzzShort">蜂鳴器短鳴｜</p>
                <p class="introduction">
                    使用方式 buzz();
                </p>
                <button class="copyButton" onclick="copyCode(this, 'code4')">點擊複製</button>
                <pre>
<code id="code4">
void buzz()
{
    PB11 = 0;
    CLK_SysTickDelay(30000);
    PB11 = 1;
}
</code>
                </pre>
                <p class="introduction_B" id="buzzLong">蜂鳴器長鳴｜</p>
                <p class="introduction">
                    使用方式 buzzL();
                </p>
                <button class="copyButton" onclick="copyCode(this, 'code5')">點擊複製</button>
                <pre>
<code id="code5">
void buzzL()
{
    PB11 = 0;
    CLK_SysTickDelay(300000);
    PB11 = 1;
}
</code>
                </pre>
            </div>
        </div>

    </div>

    <div id="hanshan2" style="display: none;">

        <div class="basic">
            <p class="introduction_B">本期重點｜</p>
            <p class="introduction">
                GPIO_SetMode(PB,BIT0,GPIO_MODE_QUASI);
                <br>
                GPIO_SetMode(PB,BIT1,GPIO_MODE_QUASI);
                <br>
                GPIO_SetMode(PB,BIT2,GPIO_MODE_QUASI);
                <br>
                GPIO_SetMode(PB,BIT3,GPIO_MODE_QUASI);
            </p>
            <p class="introduction_B">本期解析｜</p>
            <p class="introduction">
                利用4線傳遞4個LED的開啟狀態，顯示二進位LED
            </p>
            <p class="introduction_B">延伸閱讀｜</p>
            <p class="introduction">
                <a class="link" href="雙向九宮格.html" target="_blank">九宮格</a>
            </p>
            <button class="copyButton" onclick="copyCode(this, 'code6')">點擊複製</button>
            <pre>
<code id="code6">
#include <stdio.h>
#include "NUC100Series.h"
#include "MCU_init.h"
#include "SYS_init.h"
#include "LCD.h"
#include "Scankey.h"

void LED(int x){

    if(x%2==1){
        PC15=0;
    }
    x=(x-(x%2))/2;
    
    if(x%2==1){
        PC14=0;
    }
    x=(x-(x%2))/2;
    
    if(x%2==1){
        PC13=0;
    }
    x=(x-(x%2))/2;
    
    if(x%2==1){
        PC12=0;
    }

    CLK_SysTickDelay(1000000);
}

int main(void)
{
    int keyin = 0, self;
    
    GPIO_SetMode(PB,BIT0,GPIO_MODE_QUASI);
    GPIO_SetMode(PB,BIT1,GPIO_MODE_QUASI);
    GPIO_SetMode(PB,BIT2,GPIO_MODE_QUASI);
    GPIO_SetMode(PB,BIT3,GPIO_MODE_QUASI);

    PB0=1;
    PB1=1;
    PB2=1;
    PB3=1;
    
    SYS_Init();	  
    OpenKeyPad();
    
    while(1)
    {
        
        keyin = ScanKey();
        self = keyin;
        
        if(keyin%2){
            PB0=0;
        }
        keyin=(keyin-(keyin%2))/2;
        
        if(keyin%2){
            PB1=0;
        }
        keyin=(keyin-(keyin%2))/2;
        
        if(keyin%2){
            PB2=0;
        }
        keyin=(keyin-(keyin%2))/2;
        
        if(keyin%2){
            PB3=0;
        }

        if(self != 0){
            LED(self);
        }
        else{
            if(PB0==0){
                PC15=0;
            }
            if(PB1==0){
                PC14=0;
            }
            if(PB2==0){
                PC13=0;
            }
            if(PB3==0){
                PC12=0;
            }
        }
        
        PC15=1;
        PC14=1;
        PC13=1;
        PC12=1;

    }
}
</code>
            </pre>
        </div>

    </div>

    <div id="hanshan3" style="display: none;">

        <div class="basic">
            <p class="introduction_B" id="buzzLong">本期重點｜</p>
            <p class="introduction">
                void Init_UART(void){ UART_Open(UART0, 9600); }
                <br>
                <br>
                sprintf(TX_Buffer, "%d", keyin);
                <br>
                UART_Write(UART0, TX_Buffer, 5);
                <br>
                UART_Read(UART0, RX_Buffer, 5);
                <br>
                print_Line(2, RX_Buffer);
            </p>
            <p class="introduction_B" id="buzzLong">本期解析｜</p>
            <p class="introduction">
                將A機器按鍵資料傳送到B機器，顯示二進位LED
            </p>
            <p class="introduction_B" id="buzzLong">延伸閱讀｜</p>
            <p class="introduction">
                <a class="link" href="另一種九宮格.html" target="_blank">九宮格</a>
            </p>
            <button class="copyButton" onclick="copyCode(this, 'code7')">點擊複製</button>
            <pre>
<code id="code7">
#include <stdio.h>
#include <math.h>
#include <string.h>
#include "NUC100Series.h"
#include "MCU_init.h"
#include "SYS_init.h"
#include "LCD.h"
#include "Scankey.h"

void Init_UART(void)
{ 
    UART_Open(UART0, 9600);
}

int32_t main()
{
    char TX_Buffer[16];
    char RX_Buffer[16];
    uint32_t keyin = 0;
    int num = 0;
    
    SYS_Init();
    init_LCD();
    clear_LCD();
    Init_UART();

    PD14 = 0;
    print_Line(0, "TX and RX:");
    
    sprintf(TX_Buffer, "0");
    while(1){
        while(1)
        {		
            keyin = ScanKey();
            sprintf(TX_Buffer, "%d", keyin);
            UART_Write(UART0, TX_Buffer, 5);
            CLK_SysTickDelay(1000);
            break;
        }
        
        while(1)
        {
            UART_Read(UART0, RX_Buffer, 5);
            print_Line(2, RX_Buffer);
            num = RX_Buffer[0] - 48;
            PC15 = (num+1)%2;
            num/=2;
            PC14 = (num+1)%2;
            num/=2;
            PC13 = (num+1)%2;
            num/=2;
            PC12 = (num+1)%2;
            break;
        }
    }
}
</code>
                </pre>
        </div>

    </div>

    <div id="hanshan4" style="display: none;">

        <div class="basic">
            <p class="introduction_B" id="buzzLong">本期重點｜</p>
            <p class="introduction">
                ADC_START_CONV(ADC);
                u32ADCvalue = ADC_GET_CONVERSION_DATA(ADC, 7);
            </p>
            <p class="introduction_B" id="buzzLong">本期解析｜</p>
            <p class="introduction">
                轉動ADC，調整七段顯示器亮度
            </p>
            <p class="introduction_B" id="buzzLong">延伸閱讀｜</p>
            <p class="introduction">
                沒有延伸閱讀因為這裡是期末小精靈的窩
            </p>
            <button class="copyButton" onclick="copyCode(this, 'code8')">點擊複製</button>
            <pre>
<code id="code8">
#include <stdio.h>
#include "NUC100Series.h"
#include "MCU_init.h"
#include "SYS_init.h"
#include "LCD.h"
#include "Seven_Segment.h"


void Show(int x)
{
        if(x==2||x==12||x==14||x==15){
            PE0 = 1;
        }
        else{
            PE0 = 0;
        }
        
        if(x==1||x==2||x==3||x==7||x==13){
            PE2 = 1;
        }
        else{
            PE2 = 0;
        }
        
        if(x==1||x==4||x==6||x==11||x==13){
            PE3 = 1;
        }
        else{
            PE3 = 0;
        }
        
        if(x==5||x==6||x==11||x==12||x==14||x==15){
            PE4 = 1;
        }
        else{
            PE4 = 0;
        }
        
        if(x==1||x==4||x==7||x==9||x==10||x==15){
            PE5 = 1;
        }
        else{
            PE5 = 0;
        }
        
        if(x==1||x==3||x==4||x==5||x==7||x==9){
            PE6 = 1;
        }
        else{
            PE6 = 0;
        }
        
        if(x==0||x==1||x==7||x==12){
            PE7 = 1;
        }
        else{
            PE7 = 0;
        }
}

void Display_7seg(int x, int t)
{
    int a = 0, n = 0;
    int x1,x2,x3,x4;
    x1=x%10;
    x2=x/10%10;
    x3=x/10/10%10;
    x4=x/10/10/10;
    
    while(a<=t){
        PC4 = 1;
        PC5 = 0;
        PC6 = 0;
        PC7 = 0;
        Show(x1);
        CLK_SysTickDelay(1);
        PC4 = 0;
        PC5 = 1;
        PC6 = 0;
        PC7 = 0;
        Show(x2);
        CLK_SysTickDelay(1);
        PC4 = 0;
        PC5 = 0;
        PC6 = 1;
        PC7 = 0;
        Show(x3);
        CLK_SysTickDelay(1);
        PC4 = 0;
        PC5 = 0;
        PC6 = 0;
        PC7 = 1;
        Show(x4);
        CLK_SysTickDelay(1);
        a++;
    }
    PC4 = 0;
    PC5 = 0;
    PC6 = 0;
    PC7 = 0;
}

char Text[16];

void Init_ADC(void)
{
    ADC_Open(ADC, ADC_INPUT_MODE, ADC_OPERATION_MODE, ADC_CHANNEL_MASK);
    ADC_POWER_ON(ADC);
}

int32_t main (void)
{
        int i = 0;
        int a = 0;
    
    uint32_t u32ADCvalue;
    SYS_Init();
    
    Init_ADC();
        init_LCD();
        clear_LCD();
    
        PD14 = 0;
    
        PC4 = 0;
        PC5 = 0;	
        PC6 = 0;	
        PC7 = 0;
        CLK_SysTickDelay(50000);

        a=9980;
        while(1)
        {
            for(;a<=9999;a++){
                Display_7seg(a, u32ADCvalue);
                ADC_START_CONV(ADC);
        u32ADCvalue = ADC_GET_CONVERSION_DATA(ADC, 7);
            sprintf(Text,"T = %5d", u32ADCvalue);
            print_Line(1, Text);
                print_Line(0, "VR");
            }
            a=0;
        }
        
}
</code>
                </pre>
        </div>

    </div>
    <div id="hanshan5" style="display: none;">

        <div class="basic">
            <p class="introduction_B">本期重點｜</p>
            <p class="introduction">
                ADC_START_CONV(ADC);
                <br>
                X = ADC_GET_CONVERSION_DATA(ADC, 0);
                <br>
                Y = ADC_GET_CONVERSION_DATA(ADC, 1);
            </p>
            <p class="introduction_B">本期解析｜</p>
            <p class="introduction">
                小恐龍
            </p>
            <p class="introduction_B">延伸閱讀｜</p>
            <p class="introduction">
                沒有延伸閱讀因為這期是他媽超長小恐龍，期末小精靈覺得幹
            </p>
            <button class="copyButton" onclick="copyCode(this, 'code9')">點擊複製</button>
            <pre>
<code id="code9">
#include <stdio.h>
#include <stdlib.h>
#include "NUC100Series.h"
#include "MCU_init.h"
#include "SYS_init.h"
#include "LCD.h"
#include "Seven_Segment.h"

char Text[16];

int moveDy = 48;
int moveC1x = 112;
int moveC2x = 178;
int hitC1 = 0;
int hitC2 = 0;
int life = 4;
int pass = 0;

void Show(uint16_t x)
{
        if(x==2||x==12||x==14||x==15){
            PE0 = 1;
        }
        else{
            PE0 = 0;
        }
        
        if(x==1||x==2||x==3||x==7||x==13){
            PE2 = 1;
        }
        else{
            PE2 = 0;
        }
        
        if(x==1||x==4||x==6||x==11||x==13){
            PE3 = 1;
        }
        else{
            PE3 = 0;
        }
        
        if(x==5||x==6||x==11||x==12||x==14||x==15){
            PE4 = 1;
        }
        else{
            PE4 = 0;
        }
        
        if(x==1||x==4||x==7||x==9||x==10||x==15){
            PE5 = 1;
        }
        else{
            PE5 = 0;
        }
        
        if(x==1||x==3||x==4||x==5||x==7||x==9){
            PE6 = 1;
        }
        else{
            PE6 = 0;
        }
        
        if(x==0||x==1||x==7||x==12){
            PE7 = 1;
        }
        else{
            PE7 = 0;
        }
}

void Display_7seg(int x)
{
    int a = 0, n = 0;
    int x1,x2,x3,x4;
    x1=x%10;
    x2=x/10%10;
    x3=x/10/10%10;
    x4=x/10/10/10;
    
    while(a<=200){
        PC4 = 1;
        PC5 = 0;
        PC6 = 0;
        PC7 = 0;
        Show(x1);
        CLK_SysTickDelay(50);
        PC4 = 0;
        PC5 = 1;
        PC6 = 0;
        PC7 = 0;
        Show(x2);
        CLK_SysTickDelay(50);
        PC4 = 0;
        PC5 = 0;
        PC6 = 1;
        PC7 = 0;
        Show(x3);
        CLK_SysTickDelay(50);
        PC4 = 0;
        PC5 = 0;
        PC6 = 0;
        PC7 = 1;
        Show(x4);
        CLK_SysTickDelay(50);
        PC4 = 0;
        PC5 = 0;
        PC6 = 0;
        PC7 = 0;
        a++;
    }
    a = 500;
}

//16*16
unsigned char D[] = {
    0x00,0x00,0x00,0x80,0x00,0x00,0x80,0xC0,0xFC,0xFE,0xBE,0x1E,0x1E,0x0C,0x00,0x00,
    0x00,0x00,0x00,0x03,0x07,0x0F,0x5F,0x0F,0x5F,0x07,0x00,0x00,0x00,0x00,0x00,0x00
};

//16*16
unsigned char C1[] = {
    0x00,0x00,0x00,0x00,0xC0,0xC0,0x00,0xF8,0xF8,0x00,0xE0,0xE0,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x01,0x03,0x02,0x3F,0x3F,0x02,0x03,0x01,0x00,0x00,0x00,0x00
};

//16*16
unsigned char C2[] = {
    0x00,0x00,0x80,0xF0,0x80,0xE0,0x00,0x00,0x00,0xE0,0x00,0xF0,0xF0,0x00,0xC0,0x00,
    0x00,0x03,0x07,0x3F,0x01,0x00,0x0E,0x3F,0x0E,0x04,0x01,0x3F,0x3F,0x02,0x03,0x00
};

void Init_ADC(void)
{
    ADC_Open(ADC, ADC_INPUT_MODE, ADC_OPERATION_MODE, ADC_CHANNEL_MASK);
    ADC_POWER_ON(ADC);
}

void Cmove()
{
        draw_Bmp16x16(moveC1x,48,FG_COLOR,FG_COLOR,C1);
        moveC1x = moveC1x - 4;
        if(moveC1x <= 0){
            if(hitC1 == 0){
                pass = pass + 1;
            }
            hitC1 = 0;
            moveC1x = rand() % 200 + 112;
        }
        draw_Bmp16x16(moveC2x,48,FG_COLOR,FG_COLOR,C2);
        moveC2x = moveC2x - 4;
        if(moveC2x <= 0){
            if(hitC2 == 0){
                pass = pass + 1;
            }
            hitC2 = 0;
            moveC2x = rand() % 200 + 112;
        }
}
void check()
{
        if(moveC1x <= 18){
            if(moveDy + 16 > 56 && hitC1 == 0){
                hitC1 = 1;
                life = life - 1;
            }
        }
        if(moveC2x <= 18){
            if(moveDy + 16 > 56 && hitC2 == 0){
                hitC2 = 1;
                life = life - 1;
            }
        }
}

void showLife(int x){
    if(x == 4){
        PC12 = 0;
        PC13 = 0;
        PC14 = 0;
        PC15 = 0;
    }
    if(x == 3){
        PC12 = 1;
        PC13 = 0;
        PC14 = 0;
        PC15 = 0;
    }
    if(x == 2){
        PC12 = 1;
        PC13 = 1;
        PC14 = 0;
        PC15 = 0;
    }
    if(x == 1){
        PC12 = 1;
        PC13 = 1;
        PC14 = 1;
        PC15 = 0;
    }
    if(x == 0){
        PC12 = 1;
        PC13 = 1;
        PC14 = 1;
        PC15 = 1;
    }
}

int32_t main (void)
{
    uint32_t x, y, z;
    SYS_Init();
    Init_ADC();
        init_LCD();
        clear_LCD();
    
        PD14 = 0;
    
        draw_Bmp16x16(5,48,FG_COLOR,FG_COLOR,D);

    while(1)
        {
        ADC_START_CONV(ADC);
            Cmove();
            check();
            showLife(life);
            if(life <= 0){
                break;
            }
            Display_7seg(pass);
        //CLK_SysTickDelay(20000);
            draw_Bmp16x16(5,48,FG_COLOR,FG_COLOR,D);
            if(y <= 100){
                while(moveDy > 28){
                    draw_Bmp16x16(5,moveDy,FG_COLOR,FG_COLOR,D);
                    moveDy = moveDy - 2;
                    Cmove();
                    check();
                    showLife(life);
                    if(life <= 0){
                        break;
                    }
                Display_7seg(pass);
                    //CLK_SysTickDelay(20000);
                    clear_LCD();
                }
                CLK_SysTickDelay(20000);
                while(moveDy < 48){
                    draw_Bmp16x16(5,moveDy,FG_COLOR,FG_COLOR,D);
                    moveDy = moveDy + 2;
                    Cmove();
                    check();
                    showLife(life);
                    if(life <= 0){
                        break;
                    }
                Display_7seg(pass);
                    //CLK_SysTickDelay(20000);
                    clear_LCD();
                }
            }
            x = ADC_GET_CONVERSION_DATA(ADC, 0);
            sprintf(Text,"T = %5d", x);
        //print_Line(1, Text);
        y = ADC_GET_CONVERSION_DATA(ADC, 1);
            sprintf(Text,"T = %5d", y);
        //print_Line(2, Text);
            z = PB0;
        sprintf(Text,"T = %5d", z);
        //print_Line(3, Text);
            clear_LCD();
    }
        draw_Bmp16x16(5,moveDy,FG_COLOR,FG_COLOR,D);
        draw_Bmp16x16(moveC1x,48,FG_COLOR,FG_COLOR,C1);
        draw_Bmp16x16(moveC2x,48,FG_COLOR,FG_COLOR,C2);
}
</code>
            </pre>
        </div>

    </div>
    <div id="hanshan6" style="display: none;">

        <div class="basic">
            <p class="introduction_B">本期重點｜</p>
            <p class="introduction">
                使用方式 void TMR1_IRQHandler(){ }
                <br>
                <br>
                if(z == 0 && pre == 1){ PD14 = ~PD14; } //~切換成相反狀態
                <br>
                <br>
                TIMER_ClearIntFlag(TIMER1);
            </p>
            <p class="introduction_B">本期解析｜</p>
            <p class="introduction">
                按下按鈕不再受到等待時長的限制，即時反應
                <br>
                <br>
                希望即時反應的內容應寫在void TMR1_IRQHandler(){ }中
            </p>
            <button class="copyButton" onclick="copyCode(this, 'code10')">點擊複製</button>
            <pre>
<code id="code10">
#include <stdio.h>
#include "NUC100Series.h"
#include "MCU_init.h"
#include "SYS_init.h"
#include <math.h>
#include <string.h>
#include "LCD.h"

uint8_t ledState = 0;
uint32_t keyin = 0;
uint32_t i = 5;
uint32_t j = 0;
int pre = 1;
int now = 5;

uint32_t x, y, z;

char Text[16];

void Show(int x)
{
    PC4 = 1;
    PC5 = 0;
    PC6 = 0;
    PC7 = 0;
    if(x==2||x==12||x==14||x==15){
        PE0 = 1;
    }
    else{
        PE0 = 0;
    }
    
    if(x==1||x==2||x==3||x==7||x==13){
        PE2 = 1;
    }
    else{
        PE2 = 0;
    }
    
    if(x==1||x==4||x==6||x==11||x==13){
        PE3 = 1;
    }
    else{
        PE3 = 0;
    }
    
    if(x==5||x==6||x==11||x==12||x==14||x==15){
        PE4 = 1;
    }
    else{
        PE4 = 0;
    }
    
    if(x==1||x==4||x==7||x==9||x==10||x==15){
        PE5 = 1;
    }
    else{
        PE5 = 0;
    }
    
    if(x==1||x==3||x==4||x==5||x==7||x==9){
        PE6 = 1;
    }
    else{
        PE6 = 0;
    }
    
    if(x==0||x==1||x==7||x==12){
        PE7 = 1;
    }
    else{
        PE7 = 0;
    }
}

void run(uint32_t x){
    x = x * 10000;
    PC12 = 0;
    PC13 = 1;
    PC14 = 1;
    PC15 = 1;
    CLK_SysTickDelay(x);
    PC12 = 1;
    PC13 = 0;
    PC14 = 1;
    PC15 = 1;
    CLK_SysTickDelay(x);
    PC12 = 1;
    PC13 = 1;
    PC14 = 0;
    PC15 = 1;
    CLK_SysTickDelay(x);
    PC12 = 1;
    PC13 = 1;
    PC14 = 1;
    PC15 = 0;
    CLK_SysTickDelay(x);
    PC12 = 1;
    PC13 = 1;
    PC14 = 1;
    PC15 = 1;
}

void Init_ADC(void)
{
    ADC_Open(ADC, ADC_INPUT_MODE, ADC_OPERATION_MODE, ADC_CHANNEL_MASK);
    ADC_POWER_ON(ADC);
}

void TMR1_IRQHandler(void)
{	
    z = PB0;
    if(z == 0 && pre == 1){
        PD14 = ~PD14;
    }
    pre = z;
    TIMER_ClearIntFlag(TIMER1); // Clear Timer1 time-out interrupt flag
}

void Init_Timer1(void)
{
    TIMER_Open(TIMER1, TMR1_OPERATING_MODE, 5);
    TIMER_EnableInt(TIMER1);
    NVIC_EnableIRQ(TMR1_IRQn);
    TIMER_Start(TIMER1);
}

int main(void)
{
    
    SYS_Init();
    init_LCD();
    clear_LCD();
    Init_ADC();

    PD14 = 0;
    print_Line(0, "timer");
    Init_Timer1();

    while(1)
    {
        ADC_START_CONV(ADC);
        y = ADC_GET_CONVERSION_DATA(ADC, 1);
        sprintf(Text,"T = %5d", y);
        print_Line(2, Text);
        x = ADC_GET_CONVERSION_DATA(ADC, 0);
        sprintf(Text,"T = %5d", x);
        print_Line(1, Text);
        sprintf(Text,"T = %5d", z);
        print_Line(3, Text);
        if(x < 725){
            now = 9;
        }
        else if(x < 1450){
            now = 8;
        }
        else if(x < 2175){
            now = 7;
        }
        else if(x < 3200){
            now = 6;
        }
        else if(x < 3400){
            //now = 5;
        }
        else if(x < 3600){
            now = 4;
        }
        else if(x < 3750){
            now = 3;
        }
        else if(x < 3925){
            now = 2;
        }
        else{
            now = 1;
        }
        Show(now);
        run(now + 1);
    }
}
</code>
            </pre>
        </div>

    </div>
</body>

</html>